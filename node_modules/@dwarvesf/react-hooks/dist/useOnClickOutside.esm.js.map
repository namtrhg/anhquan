{"version":3,"file":"useOnClickOutside.esm.js","sources":["../src/useOnClickOutside.ts"],"sourcesContent":["import React, { useEffect } from 'react'\n\nconst MOUSEDOWN = 'mousedown'\nconst TOUCHSTART = 'touchstart'\n\ntype HandledEvents = [typeof MOUSEDOWN, typeof TOUCHSTART]\ntype HandledEventsType = HandledEvents[number]\ntype PossibleEvent = {\n  [Type in HandledEventsType]: HTMLElementEventMap[Type]\n}[HandledEventsType]\ntype Handler = (event: PossibleEvent) => void\n\nconst events: HandledEvents = [MOUSEDOWN, TOUCHSTART]\n\nexport default function useOnClickOutside(\n  ref: React.RefObject<HTMLElement>,\n  handler: Handler,\n) {\n  useEffect(\n    () => {\n      if (!handler) {\n        return\n      }\n\n      const listener = (event: PossibleEvent) => {\n        // Do nothing if clicking ref's element or descendent elements\n        if (!ref.current || ref.current.contains(event.target as Node)) {\n          return\n        }\n        handler(event)\n      }\n\n      events.forEach((event) => {\n        document.addEventListener(event, listener)\n      })\n\n      return () => {\n        events.forEach((event) => {\n          document.removeEventListener(event, listener)\n        })\n      }\n    },\n    // Add ref and handler to effect dependencies\n    // It's worth noting that because passed in handler is a new ...\n    // ... function on every render that will cause this effect ...\n    // ... callback/cleanup to run every render. It's not a big deal ...\n    // ... but to optimize you can wrap handler in useCallback before ...\n    // ... passing it into this hook.\n    [ref, handler],\n  )\n}\n"],"names":["MOUSEDOWN","TOUCHSTART","events","useOnClickOutside","ref","handler","useEffect","listener","event","current","contains","target","forEach","document","addEventListener","removeEventListener"],"mappings":";;AAEA,IAAMA,SAAS,GAAG,WAAlB;AACA,IAAMC,UAAU,GAAG,YAAnB;AASA,IAAMC,MAAM,GAAkB,CAACF,SAAD,EAAYC,UAAZ,CAA9B;SAEwBE,kBACtBC,KACAC;AAEAC,EAAAA,SAAS,CACP;AACE,QAAI,CAACD,OAAL,EAAc;AACZ;AACD;;AAED,QAAME,QAAQ,GAAG,SAAXA,QAAW,CAACC,KAAD;AACf;AACA,UAAI,CAACJ,GAAG,CAACK,OAAL,IAAgBL,GAAG,CAACK,OAAJ,CAAYC,QAAZ,CAAqBF,KAAK,CAACG,MAA3B,CAApB,EAAgE;AAC9D;AACD;;AACDN,MAAAA,OAAO,CAACG,KAAD,CAAP;AACD,KAND;;AAQAN,IAAAA,MAAM,CAACU,OAAP,CAAe,UAACJ,KAAD;AACbK,MAAAA,QAAQ,CAACC,gBAAT,CAA0BN,KAA1B,EAAiCD,QAAjC;AACD,KAFD;AAIA,WAAO;AACLL,MAAAA,MAAM,CAACU,OAAP,CAAe,UAACJ,KAAD;AACbK,QAAAA,QAAQ,CAACE,mBAAT,CAA6BP,KAA7B,EAAoCD,QAApC;AACD,OAFD;AAGD,KAJD;AAKD,GAvBM;AAyBP;AACA;AACA;AACA;AACA;AACA,GAACH,GAAD,EAAMC,OAAN,CA9BO,CAAT;AAgCD;;;;"}