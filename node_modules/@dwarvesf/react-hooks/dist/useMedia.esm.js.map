{"version":3,"file":"useMedia.esm.js","sources":["../src/useMedia.ts"],"sourcesContent":["import { isSSR } from '@dwarvesf/react-utils'\nimport { useCallback, useEffect, useState } from 'react'\n\nexport default function useMedia<T>(\n  queries: string[],\n  values: T[],\n  defaultValue: T,\n) {\n  // Array containing a media query list for each query\n  const mediaQueryLists = isSSR()\n    ? []\n    : queries.map((q) => window.matchMedia(q))\n\n  const getValue = useCallback(() => {\n    const index = mediaQueryLists.findIndex((mql) => mql.matches)\n    return values?.[index] || defaultValue\n    // only form the function once\n    // eslint-disable-next-line\n  }, [])\n\n  const [value, setValue] = useState<T>(getValue)\n\n  useEffect(\n    () => {\n      // Event listener callback\n      // Note: By defining getValue outside of useEffect we ensure that it has ...\n      // ... current values of hook args (as this hook callback is created once on mount).\n      const handler = () => setValue(getValue)\n      mediaQueryLists.forEach((mql) => mql.addEventListener('change', handler))\n      return () =>\n        mediaQueryLists.forEach((mql) =>\n          mql.removeEventListener('change', handler),\n        )\n    },\n    // ensures effect is only run on mount and unmount\n    // eslint-disable-next-line\n    [],\n  )\n  return value\n}\n"],"names":["useMedia","queries","values","defaultValue","mediaQueryLists","isSSR","map","q","window","matchMedia","getValue","useCallback","index","findIndex","mql","matches","useState","value","setValue","useEffect","handler","forEach","addEventListener","removeEventListener"],"mappings":";;;SAGwBA,SACtBC,SACAC,QACAC;AAEA;AACA,MAAMC,eAAe,GAAGC,KAAK,KACzB,EADyB,GAEzBJ,OAAO,CAACK,GAAR,CAAY,UAACC,CAAD;AAAA,WAAOC,MAAM,CAACC,UAAP,CAAkBF,CAAlB,CAAP;AAAA,GAAZ,CAFJ;AAIA,MAAMG,QAAQ,GAAGC,WAAW,CAAC;AAC3B,QAAMC,KAAK,GAAGR,eAAe,CAACS,SAAhB,CAA0B,UAACC,GAAD;AAAA,aAASA,GAAG,CAACC,OAAb;AAAA,KAA1B,CAAd;AACA,WAAO,CAAAb,MAAM,QAAN,YAAAA,MAAM,CAAGU,KAAH,CAAN,KAAmBT,YAA1B;AAEA;AACD,GAL2B,EAKzB,EALyB,CAA5B;;AAOA,kBAA0Ba,QAAQ,CAAIN,QAAJ,CAAlC;AAAA,MAAOO,KAAP;AAAA,MAAcC,QAAd;;AAEAC,EAAAA,SAAS,CACP;AACE;AACA;AACA;AACA,QAAMC,OAAO,GAAG,SAAVA,OAAU;AAAA,aAAMF,QAAQ,CAACR,QAAD,CAAd;AAAA,KAAhB;;AACAN,IAAAA,eAAe,CAACiB,OAAhB,CAAwB,UAACP,GAAD;AAAA,aAASA,GAAG,CAACQ,gBAAJ,CAAqB,QAArB,EAA+BF,OAA/B,CAAT;AAAA,KAAxB;AACA,WAAO;AAAA,aACLhB,eAAe,CAACiB,OAAhB,CAAwB,UAACP,GAAD;AAAA,eACtBA,GAAG,CAACS,mBAAJ,CAAwB,QAAxB,EAAkCH,OAAlC,CADsB;AAAA,OAAxB,CADK;AAAA,KAAP;AAID,GAXM;AAaP;AACA,IAdO,CAAT;AAgBA,SAAOH,KAAP;AACD;;;;"}