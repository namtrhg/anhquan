{"version":3,"file":"useWhyDidYouUpdate.esm.js","sources":["../src/useWhyDidYouUpdate.ts"],"sourcesContent":["import { useEffect, useRef } from 'react'\n\nexport default function useWhyDidYouUpdate(\n  name: string,\n  props: Record<string, any>,\n) {\n  // Get a mutable ref object where we can store props ...\n  // ... for comparison next time this hook runs.\n  const previousProps = useRef<Record<string, any>>({})\n  useEffect(() => {\n    if (previousProps.current) {\n      // Get all keys from previous and current props\n      const allKeys = Object.keys({ ...previousProps.current, ...props })\n      // Use this object to keep track of changed props\n      const changesObj: Record<string, any> = {}\n      allKeys.forEach((key) => {\n        // If previous is different from current\n        if (previousProps.current[key] !== props[key]) {\n          // Add to changesObj\n          changesObj[key] = {\n            from: previousProps.current[key],\n            to: props[key],\n          }\n        }\n      })\n      // If changesObj not empty then output to console\n      if (Object.keys(changesObj).length) {\n        // eslint-disable-next-line no-console\n        console.log('[why-did-you-update]', name, changesObj)\n      }\n    }\n    // Finally update previousProps with current props for next hook call\n    previousProps.current = props\n  })\n}\n"],"names":["useWhyDidYouUpdate","name","props","previousProps","useRef","useEffect","current","allKeys","Object","keys","changesObj","forEach","key","from","to","length","console","log"],"mappings":";;;SAEwBA,mBACtBC,MACAC;AAEA;AACA;AACA,MAAMC,aAAa,GAAGC,MAAM,CAAsB,EAAtB,CAA5B;AACAC,EAAAA,SAAS,CAAC;AACR,QAAIF,aAAa,CAACG,OAAlB,EAA2B;AACzB;AACA,UAAMC,OAAO,GAAGC,MAAM,CAACC,IAAP,cAAiBN,aAAa,CAACG,OAA/B,EAA2CJ,KAA3C,EAAhB,CAFyB;;AAIzB,UAAMQ,UAAU,GAAwB,EAAxC;AACAH,MAAAA,OAAO,CAACI,OAAR,CAAgB,UAACC,GAAD;AACd;AACA,YAAIT,aAAa,CAACG,OAAd,CAAsBM,GAAtB,MAA+BV,KAAK,CAACU,GAAD,CAAxC,EAA+C;AAC7C;AACAF,UAAAA,UAAU,CAACE,GAAD,CAAV,GAAkB;AAChBC,YAAAA,IAAI,EAAEV,aAAa,CAACG,OAAd,CAAsBM,GAAtB,CADU;AAEhBE,YAAAA,EAAE,EAAEZ,KAAK,CAACU,GAAD;AAFO,WAAlB;AAID;AACF,OATD,EALyB;;AAgBzB,UAAIJ,MAAM,CAACC,IAAP,CAAYC,UAAZ,EAAwBK,MAA5B,EAAoC;AAClC;AACAC,QAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ,EAAoChB,IAApC,EAA0CS,UAA1C;AACD;AACF;;;AAEDP,IAAAA,aAAa,CAACG,OAAd,GAAwBJ,KAAxB;AACD,GAxBQ,CAAT;AAyBD;;;;"}